"use strict";(()=>{var ud=Object.defineProperty;var dd=Object.getPrototypeOf;var hd=Reflect.get;var fd=(s,e,t)=>e in s?ud(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var te=(s,e,t)=>(fd(s,typeof e!="symbol"?e+"":e,t),t),Wr=(s,e,t)=>{if(!e.has(s))throw TypeError("Cannot "+t)};var S=(s,e,t)=>(Wr(s,e,"read from private field"),t?t.call(s):e.get(s)),F=(s,e,t)=>{if(e.has(s))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(s):e.set(s,t)},G=(s,e,t,i)=>(Wr(s,e,"write to private field"),i?i.call(s,t):e.set(s,t),t);var ce=(s,e,t)=>(Wr(s,e,"access private method"),t),Ts=(s,e,t)=>hd(dd(s),t,e);var ai=class{addEventListener(){}removeEventListener(){}dispatchEvent(e){return!0}};if(typeof DocumentFragment=="undefined"){class s extends ai{}globalThis.DocumentFragment=s}var Pi=class extends ai{},Yr=class extends ai{},md={get(s){},define(s,e,t){},getName(s){return null},upgrade(s){},whenDefined(s){return Promise.resolve(Pi)}},Oi,jr=class{constructor(e,t={}){F(this,Oi,void 0);G(this,Oi,t==null?void 0:t.detail)}get detail(){return S(this,Oi)}initCustomEvent(){}};Oi=new WeakMap;function gd(s,e){return new Pi}var Io={document:{createElement:gd},DocumentFragment,customElements:md,CustomEvent:jr,EventTarget:ai,HTMLElement:Pi,HTMLVideoElement:Yr},Do=typeof window=="undefined"||typeof globalThis.customElements=="undefined",xs=Do?Io:globalThis,oy=Do?Io.document:globalThis.document;var pd=Object.create,Fo=Object.defineProperty,yd=Object.getOwnPropertyDescriptor,vd=Object.getOwnPropertyNames,Ed=Object.getPrototypeOf,Td=Object.prototype.hasOwnProperty,Uo=function(s,e){return function(){return s&&(e=s(s=0)),e}},Oe=function(s,e){return function(){return e||s((e={exports:{}}).exports,e),e.exports}},xd=function(s,e,t,i){if(e&&typeof e=="object"||typeof e=="function")for(var r=vd(e),n=0,a=r.length,o;n<a;n++)o=r[n],!Td.call(s,o)&&o!==t&&Fo(s,o,{get:function(l){return e[l]}.bind(null,o),enumerable:!(i=yd(e,o))||i.enumerable});return s},qe=function(s,e,t){return t=s!=null?pd(Ed(s)):{},xd(e||!s||!s.__esModule?Fo(t,"default",{value:s,enumerable:!0}):t,s)},Je=Oe(function(s,e){var t;typeof window!="undefined"?t=window:typeof global!="undefined"?t=global:typeof self!="undefined"?t=self:t={},e.exports=t});function Kt(s,e){return e!=null&&typeof Symbol!="undefined"&&e[Symbol.hasInstance]?!!e[Symbol.hasInstance](s):Kt(s,e)}var Ht=Uo(function(){Ht()});function an(s){"@swc/helpers - typeof";return s&&typeof Symbol!="undefined"&&s.constructor===Symbol?"symbol":typeof s}var on=Uo(function(){}),Bo=Oe(function(s,e){var t=Array.prototype.slice;e.exports=i;function i(r,n){for(("length"in r)||(r=[r]),r=t.call(r);r.length;){var a=r.shift(),o=n(a);if(o)return o;a.childNodes&&a.childNodes.length&&(r=t.call(a.childNodes).concat(r))}}}),_d=Oe(function(s,e){Ht(),e.exports=t;function t(i,r){if(!Kt(this,t))return new t(i,r);this.data=i,this.nodeValue=i,this.length=i.length,this.ownerDocument=r||null}t.prototype.nodeType=8,t.prototype.nodeName="#comment",t.prototype.toString=function(){return"[object Comment]"}}),Sd=Oe(function(s,e){Ht(),e.exports=t;function t(i,r){if(!Kt(this,t))return new t(i);this.data=i||"",this.length=this.data.length,this.ownerDocument=r||null}t.prototype.type="DOMTextNode",t.prototype.nodeType=3,t.prototype.nodeName="#text",t.prototype.toString=function(){return this.data},t.prototype.replaceData=function(i,r,n){var a=this.data,o=a.substring(0,i),l=a.substring(i+r,a.length);this.data=o+n+l,this.length=this.data.length}}),$o=Oe(function(s,e){e.exports=t;function t(i){var r=this,n=i.type;i.target||(i.target=r),r.listeners||(r.listeners={});var a=r.listeners[n];if(a)return a.forEach(function(o){i.currentTarget=r,typeof o=="function"?o(i):o.handleEvent(i)});r.parentNode&&r.parentNode.dispatchEvent(i)}}),Go=Oe(function(s,e){e.exports=t;function t(i,r){var n=this;n.listeners||(n.listeners={}),n.listeners[i]||(n.listeners[i]=[]),n.listeners[i].indexOf(r)===-1&&n.listeners[i].push(r)}}),Ko=Oe(function(s,e){e.exports=t;function t(i,r){var n=this;if(n.listeners&&n.listeners[i]){var a=n.listeners[i],o=a.indexOf(r);o!==-1&&a.splice(o,1)}}}),bd=Oe(function(s,e){on(),e.exports=i;var t=["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"];function i(h){switch(h.nodeType){case 3:return u(h.data);case 8:return"<!--"+h.data+"-->";default:return r(h)}}function r(h){var f=[],m=h.tagName;return h.namespaceURI==="http://www.w3.org/1999/xhtml"&&(m=m.toLowerCase()),f.push("<"+m+c(h)+o(h)),t.indexOf(m)>-1?f.push(" />"):(f.push(">"),h.childNodes.length?f.push.apply(f,h.childNodes.map(i)):h.textContent||h.innerText?f.push(u(h.textContent||h.innerText)):h.innerHTML&&f.push(h.innerHTML),f.push("</"+m+">")),f.join("")}function n(h,f){var m=an(h[f]);return f==="style"&&Object.keys(h.style).length>0?!0:h.hasOwnProperty(f)&&(m==="string"||m==="boolean"||m==="number")&&f!=="nodeName"&&f!=="className"&&f!=="tagName"&&f!=="textContent"&&f!=="innerText"&&f!=="namespaceURI"&&f!=="innerHTML"}function a(h){if(typeof h=="string")return h;var f="";return Object.keys(h).forEach(function(m){var g=h[m];m=m.replace(/[A-Z]/g,function(p){return"-"+p.toLowerCase()}),f+=m+":"+g+";"}),f}function o(h){var f=h.dataset,m=[];for(var g in f)m.push({name:"data-"+g,value:f[g]});return m.length?l(m):""}function l(h){var f=[];return h.forEach(function(m){var g=m.name,p=m.value;g==="style"&&(p=a(p)),f.push(g+'="'+d(p)+'"')}),f.length?" "+f.join(" "):""}function c(h){var f=[];for(var m in h)n(h,m)&&f.push({name:m,value:h[m]});for(var g in h._attributes)for(var p in h._attributes[g]){var v=h._attributes[g][p],E=(v.prefix?v.prefix+":":"")+p;f.push({name:E,value:v.value})}return h.className&&f.push({name:"class",value:h.className}),f.length?l(f):""}function u(h){var f="";return typeof h=="string"?f=h:h&&(f=h.toString()),f.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function d(h){return u(h).replace(/"/g,"&quot;")}}),Ho=Oe(function(s,e){Ht();var t=Bo(),i=$o(),r=Go(),n=Ko(),a=bd(),o="http://www.w3.org/1999/xhtml";e.exports=l;function l(c,u,d){if(!Kt(this,l))return new l(c);var h=d===void 0?o:d||null;this.tagName=h===o?String(c).toUpperCase():c,this.nodeName=this.tagName,this.className="",this.dataset={},this.childNodes=[],this.parentNode=null,this.style={},this.ownerDocument=u||null,this.namespaceURI=h,this._attributes={},this.tagName==="INPUT"&&(this.type="text")}l.prototype.type="DOMElement",l.prototype.nodeType=1,l.prototype.appendChild=function(c){return c.parentNode&&c.parentNode.removeChild(c),this.childNodes.push(c),c.parentNode=this,c},l.prototype.replaceChild=function(c,u){c.parentNode&&c.parentNode.removeChild(c);var d=this.childNodes.indexOf(u);return u.parentNode=null,this.childNodes[d]=c,c.parentNode=this,u},l.prototype.removeChild=function(c){var u=this.childNodes.indexOf(c);return this.childNodes.splice(u,1),c.parentNode=null,c},l.prototype.insertBefore=function(c,u){c.parentNode&&c.parentNode.removeChild(c);var d=u==null?-1:this.childNodes.indexOf(u);return d>-1?this.childNodes.splice(d,0,c):this.childNodes.push(c),c.parentNode=this,c},l.prototype.setAttributeNS=function(c,u,d){var h=null,f=u,m=u.indexOf(":");if(m>-1&&(h=u.substr(0,m),f=u.substr(m+1)),this.tagName==="INPUT"&&u==="type")this.type=d;else{var g=this._attributes[c]||(this._attributes[c]={});g[f]={value:d,prefix:h}}},l.prototype.getAttributeNS=function(c,u){var d=this._attributes[c],h=d&&d[u]&&d[u].value;return this.tagName==="INPUT"&&u==="type"?this.type:typeof h!="string"?null:h},l.prototype.removeAttributeNS=function(c,u){var d=this._attributes[c];d&&delete d[u]},l.prototype.hasAttributeNS=function(c,u){var d=this._attributes[c];return!!d&&u in d},l.prototype.setAttribute=function(c,u){return this.setAttributeNS(null,c,u)},l.prototype.getAttribute=function(c){return this.getAttributeNS(null,c)},l.prototype.removeAttribute=function(c){return this.removeAttributeNS(null,c)},l.prototype.hasAttribute=function(c){return this.hasAttributeNS(null,c)},l.prototype.removeEventListener=n,l.prototype.addEventListener=r,l.prototype.dispatchEvent=i,l.prototype.focus=function(){},l.prototype.toString=function(){return a(this)},l.prototype.getElementsByClassName=function(c){var u=c.split(" "),d=[];return t(this,function(h){if(h.nodeType===1){var f=h.className||"",m=f.split(" ");u.every(function(g){return m.indexOf(g)!==-1})&&d.push(h)}}),d},l.prototype.getElementsByTagName=function(c){c=c.toLowerCase();var u=[];return t(this.childNodes,function(d){d.nodeType===1&&(c==="*"||d.tagName.toLowerCase()===c)&&u.push(d)}),u},l.prototype.contains=function(c){return t(this,function(u){return c===u})||!1}}),Ad=Oe(function(s,e){Ht();var t=Ho();e.exports=i;function i(r){if(!Kt(this,i))return new i;this.childNodes=[],this.parentNode=null,this.ownerDocument=r||null}i.prototype.type="DocumentFragment",i.prototype.nodeType=11,i.prototype.nodeName="#document-fragment",i.prototype.appendChild=t.prototype.appendChild,i.prototype.replaceChild=t.prototype.replaceChild,i.prototype.removeChild=t.prototype.removeChild,i.prototype.toString=function(){return this.childNodes.map(function(r){return String(r)}).join("")}}),Rd=Oe(function(s,e){e.exports=t;function t(i){}t.prototype.initEvent=function(i,r,n){this.type=i,this.bubbles=r,this.cancelable=n},t.prototype.preventDefault=function(){}}),Ld=Oe(function(s,e){Ht();var t=Bo(),i=_d(),r=Sd(),n=Ho(),a=Ad(),o=Rd(),l=$o(),c=Go(),u=Ko();e.exports=d;function d(){if(!Kt(this,d))return new d;this.head=this.createElement("head"),this.body=this.createElement("body"),this.documentElement=this.createElement("html"),this.documentElement.appendChild(this.head),this.documentElement.appendChild(this.body),this.childNodes=[this.documentElement],this.nodeType=9}var h=d.prototype;h.createTextNode=function(f){return new r(f,this)},h.createElementNS=function(f,m){var g=f===null?null:String(f);return new n(m,this,g)},h.createElement=function(f){return new n(f,this)},h.createDocumentFragment=function(){return new a(this)},h.createEvent=function(f){return new o(f)},h.createComment=function(f){return new i(f,this)},h.getElementById=function(f){f=String(f);var m=t(this.childNodes,function(g){if(String(g.id)===f)return g});return m||null},h.getElementsByClassName=n.prototype.getElementsByClassName,h.getElementsByTagName=n.prototype.getElementsByTagName,h.contains=n.prototype.contains,h.removeEventListener=u,h.addEventListener=c,h.dispatchEvent=l}),Id=Oe(function(s,e){var t=Ld();e.exports=new t}),Dd=Oe(function(s,e){var t=typeof global!="undefined"?global:typeof window!="undefined"?window:{},i=Id(),r;typeof document!="undefined"?r=document:(r=t["__GLOBAL_DOCUMENT_CACHE@4"],r||(r=t["__GLOBAL_DOCUMENT_CACHE@4"]=i)),e.exports=r});function kd(s){if(Array.isArray(s))return s}function wd(s,e){var t=s==null?null:typeof Symbol!="undefined"&&s[Symbol.iterator]||s["@@iterator"];if(t!=null){var i=[],r=!0,n=!1,a,o;try{for(t=t.call(s);!(r=(a=t.next()).done)&&(i.push(a.value),!(e&&i.length===e));r=!0);}catch(l){n=!0,o=l}finally{try{!r&&t.return!=null&&t.return()}finally{if(n)throw o}}return i}}function Cd(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function en(s,e){(e==null||e>s.length)&&(e=s.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=s[t];return i}function Vo(s,e){if(s){if(typeof s=="string")return en(s,e);var t=Object.prototype.toString.call(s).slice(8,-1);if(t==="Object"&&s.constructor&&(t=s.constructor.name),t==="Map"||t==="Set")return Array.from(t);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return en(s,e)}}function at(s,e){return kd(s)||wd(s,e)||Vo(s,e)||Cd()}var Fi=qe(Je()),Bi=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(s){var e=Math.random()*16|0,t=s==="x"?e:e&3|8;return t.toString(16)})},qo=function(){return("000000"+(Math.random()*Math.pow(36,6)<<0).toString(36)).slice(-6)},Bt=function(s){if(s&&typeof s.nodeName!="undefined")return s.muxId||(s.muxId=qo()),s.muxId;var e;try{e=document.querySelector(s)}catch{}return e&&!e.muxId&&(e.muxId=s),(e==null?void 0:e.muxId)||s},tn=function(s){var e;s&&typeof s.nodeName!="undefined"?(e=s,s=Bt(e)):e=document.querySelector(s);var t=e&&e.nodeName?e.nodeName.toLowerCase():"";return[e,s,t]};function Pd(s){if(Array.isArray(s))return en(s)}function Od(s){if(typeof Symbol!="undefined"&&s[Symbol.iterator]!=null||s["@@iterator"]!=null)return Array.from(s)}function Md(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qe(s){return Pd(s)||Od(s)||Vo(s)||Md()}var $t={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},Nd=function(s){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3,t,i,r,n,a,o=s?[console,s]:[console],l=(t=console.trace).bind.apply(t,Qe(o)),c=(i=console.info).bind.apply(i,Qe(o)),u=(r=console.debug).bind.apply(r,Qe(o)),d=(n=console.warn).bind.apply(n,Qe(o)),h=(a=console.error).bind.apply(a,Qe(o)),f=e;return{trace:function(){for(var m=arguments.length,g=new Array(m),p=0;p<m;p++)g[p]=arguments[p];if(!(f>$t.TRACE))return l.apply(void 0,Qe(g))},debug:function(){for(var m=arguments.length,g=new Array(m),p=0;p<m;p++)g[p]=arguments[p];if(!(f>$t.DEBUG))return u.apply(void 0,Qe(g))},info:function(){for(var m=arguments.length,g=new Array(m),p=0;p<m;p++)g[p]=arguments[p];if(!(f>$t.INFO))return c.apply(void 0,Qe(g))},warn:function(){for(var m=arguments.length,g=new Array(m),p=0;p<m;p++)g[p]=arguments[p];if(!(f>$t.WARN))return d.apply(void 0,Qe(g))},error:function(){for(var m=arguments.length,g=new Array(m),p=0;p<m;p++)g[p]=arguments[p];if(!(f>$t.ERROR))return h.apply(void 0,Qe(g))},get level(){return f},set level(m){m!==this.level&&(f=m!=null?m:e)}}},ge=Nd("[mux]"),zr=qe(Je());function sn(){var s=zr.default.doNotTrack||zr.default.navigator&&zr.default.navigator.doNotTrack;return s==="1"}var Fd=qe(Je()),Ud={now:function(){var s=Fd.default.performance,e=s&&s.timing,t=e&&e.navigationStart,i=typeof t=="number"&&typeof s.now=="function"?t+s.now():Date.now();return Math.round(i)}},Se=Ud;function Q(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}Ht();function Le(s,e){if(!Kt(s,e))throw new TypeError("Cannot call a class as a function")}function ko(s,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(s,i.key,i)}}function Ze(s,e,t){return e&&ko(s.prototype,e),t&&ko(s,t),s}function N(s,e,t){return e in s?Object.defineProperty(s,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):s[e]=t,s}function rn(s,e){return rn=Object.setPrototypeOf||function(t,i){return t.__proto__=i,t},rn(s,e)}function Bd(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(e&&e.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),e&&rn(s,e)}function Ss(s){return Ss=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ss(s)}function $d(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}on();function Gd(s,e){return e&&(an(e)==="object"||typeof e=="function")?e:Q(s)}function Kd(s){var e=$d();return function(){var t=Ss(s),i;if(e){var r=Ss(this).constructor;i=Reflect.construct(t,arguments,r)}else i=t.apply(this,arguments);return Gd(this,i)}}var Ve=function(s){return $i(s)[0]},$i=function(s){if(typeof s!="string"||s==="")return["localhost"];var e=/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,t=s.match(e)||[],i=t[4],r;return i&&(r=(i.match(/[^\.]+\.[^\.]+$/)||[])[0]),[i,r]},Xr=qe(Je()),Hd={exists:function(){var s=Xr.default.performance,e=s&&s.timing;return e!==void 0},domContentLoadedEventEnd:function(){var s=Xr.default.performance,e=s&&s.timing;return e&&e.domContentLoadedEventEnd},navigationStart:function(){var s=Xr.default.performance,e=s&&s.timing;return e&&e.navigationStart}},bs=Hd;function Ee(s,e,t){t=t===void 0?1:t,s[e]=s[e]||0,s[e]+=t}function As(s){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},i=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(t).filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),i.forEach(function(r){N(s,r,t[r])})}return s}function Vd(s,e){var t=Object.keys(s);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(s);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(s,r).enumerable})),t.push.apply(t,i)}return t}function ln(s,e){return e=e!=null?e:{},Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(e)):Vd(Object(e)).forEach(function(t){Object.defineProperty(s,t,Object.getOwnPropertyDescriptor(e,t))}),s}var qd=["x-cdn","content-type"],Wo=["x-request-id","cf-ray","x-amz-cf-id","x-akamai-request-id"],Wd=qd.concat(Wo);function cn(s){s=s||"";var e={},t=s.trim().split(/[\r\n]+/);return t.forEach(function(i){if(i){var r=i.split(": "),n=r.shift();n&&(Wd.indexOf(n.toLowerCase())>=0||n.toLowerCase().indexOf("x-litix-")===0)&&(e[n]=r.join(": "))}}),e}function Rs(s){if(s){var e=Wo.find(function(t){return s[t]!==void 0});return e?s[e]:void 0}}var Yd=function(s){var e={};for(var t in s){var i=s[t],r=i["DATA-ID"].search("io.litix.data.");if(r!==-1){var n=i["DATA-ID"].replace("io.litix.data.","");e[n]=i.VALUE}}return e},Yo=Yd,_s=function(s){if(!s)return{};var e=bs.navigationStart(),t=s.loading,i=t?t.start:s.trequest,r=t?t.first:s.tfirst,n=t?t.end:s.tload;return{bytesLoaded:s.total,requestStart:Math.round(e+i),responseStart:Math.round(e+r),responseEnd:Math.round(e+n)}},Mi=function(s){if(!(!s||typeof s.getAllResponseHeaders!="function"))return cn(s.getAllResponseHeaders())},jd=function(s,e,t){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},r=arguments.length>4?arguments[4]:void 0,n=s.log,a=s.utils.secondsToMs,o=function(v){var E=parseInt(r.version),T;return E===1&&v.programDateTime!==null&&(T=v.programDateTime),E===0&&v.pdt!==null&&(T=v.pdt),T};if(!bs.exists()){n.warn("performance timing not supported. Not tracking HLS.js.");return}var l=function(v,E){return s.emit(e,v,E)},c=function(v,E){var T=E.levels,x=E.audioTracks,_=E.url,I=E.stats,b=E.networkDetails,R=E.sessionData,k={},L={};T.forEach(function($,Z){k[Z]={width:$.width,height:$.height,bitrate:$.bitrate,attrs:$.attrs}}),x.forEach(function($,Z){L[Z]={name:$.name,language:$.lang,bitrate:$.bitrate}});var w=_s(I),P=w.bytesLoaded,O=w.requestStart,W=w.responseStart,q=w.responseEnd;l("requestcompleted",ln(As({},Yo(R)),{request_event_type:v,request_bytes_loaded:P,request_start:O,request_response_start:W,request_response_end:q,request_type:"manifest",request_hostname:Ve(_),request_response_headers:Mi(b),request_rendition_lists:{media:k,audio:L,video:{}}}))};t.on(r.Events.MANIFEST_LOADED,c);var u=function(v,E){var T=E.details,x=E.level,_=E.networkDetails,I=E.stats,b=_s(I),R=b.bytesLoaded,k=b.requestStart,L=b.responseStart,w=b.responseEnd,P=T.fragments[T.fragments.length-1],O=o(P)+a(P.duration);l("requestcompleted",{request_event_type:v,request_bytes_loaded:R,request_start:k,request_response_start:L,request_response_end:w,request_current_level:x,request_type:"manifest",request_hostname:Ve(T.url),request_response_headers:Mi(_),video_holdback:T.holdBack&&a(T.holdBack),video_part_holdback:T.partHoldBack&&a(T.partHoldBack),video_part_target_duration:T.partTarget&&a(T.partTarget),video_target_duration:T.targetduration&&a(T.targetduration),video_source_is_live:T.live,player_manifest_newest_program_time:isNaN(O)?void 0:O})};t.on(r.Events.LEVEL_LOADED,u);var d=function(v,E){var T=E.details,x=E.networkDetails,_=E.stats,I=_s(_),b=I.bytesLoaded,R=I.requestStart,k=I.responseStart,L=I.responseEnd;l("requestcompleted",{request_event_type:v,request_bytes_loaded:b,request_start:R,request_response_start:k,request_response_end:L,request_type:"manifest",request_hostname:Ve(T.url),request_response_headers:Mi(x)})};t.on(r.Events.AUDIO_TRACK_LOADED,d);var h=function(v,E){var T=E.stats,x=E.networkDetails,_=E.frag;T=T||_.stats;var I=_s(T),b=I.bytesLoaded,R=I.requestStart,k=I.responseStart,L=I.responseEnd,w=x?Mi(x):void 0,P={request_event_type:v,request_bytes_loaded:b,request_start:R,request_response_start:k,request_response_end:L,request_hostname:x?Ve(x.responseURL):void 0,request_id:w?Rs(w):void 0,request_response_headers:w,request_media_duration:_.duration,request_url:x==null?void 0:x.responseURL};_.type==="main"?(P.request_type="media",P.request_current_level=_.level,P.request_video_width=(t.levels[_.level]||{}).width,P.request_video_height=(t.levels[_.level]||{}).height,P.request_labeled_bitrate=(t.levels[_.level]||{}).bitrate):P.request_type=_.type,l("requestcompleted",P)};t.on(r.Events.FRAG_LOADED,h);var f=function(v,E){var T=E.frag,x=T.start,_=o(T),I={currentFragmentPDT:_,currentFragmentStart:a(x)};l("fragmentchange",I)};t.on(r.Events.FRAG_CHANGED,f);var m=function(v,E){var T=E.type,x=E.details,_=E.response,I=E.fatal,b=E.frag,R=E.networkDetails,k=(b==null?void 0:b.url)||E.url||"",L=R?Mi(R):void 0;if((x===r.ErrorDetails.MANIFEST_LOAD_ERROR||x===r.ErrorDetails.MANIFEST_LOAD_TIMEOUT||x===r.ErrorDetails.FRAG_LOAD_ERROR||x===r.ErrorDetails.FRAG_LOAD_TIMEOUT||x===r.ErrorDetails.LEVEL_LOAD_ERROR||x===r.ErrorDetails.LEVEL_LOAD_TIMEOUT||x===r.ErrorDetails.AUDIO_TRACK_LOAD_ERROR||x===r.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT||x===r.ErrorDetails.SUBTITLE_LOAD_ERROR||x===r.ErrorDetails.SUBTITLE_LOAD_TIMEOUT||x===r.ErrorDetails.KEY_LOAD_ERROR||x===r.ErrorDetails.KEY_LOAD_TIMEOUT)&&l("requestfailed",{request_error:x,request_url:k,request_hostname:Ve(k),request_id:L?Rs(L):void 0,request_type:x===r.ErrorDetails.FRAG_LOAD_ERROR||x===r.ErrorDetails.FRAG_LOAD_TIMEOUT?"media":x===r.ErrorDetails.AUDIO_TRACK_LOAD_ERROR||x===r.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT?"audio":x===r.ErrorDetails.SUBTITLE_LOAD_ERROR||x===r.ErrorDetails.SUBTITLE_LOAD_TIMEOUT?"subtitle":x===r.ErrorDetails.KEY_LOAD_ERROR||x===r.ErrorDetails.KEY_LOAD_TIMEOUT?"encryption":"manifest",request_error_code:_==null?void 0:_.code,request_error_text:_==null?void 0:_.text}),I){var w,P="".concat(k?"url: ".concat(k,`
`):"")+"".concat(_&&(_.code||_.text)?"response: ".concat(_.code,", ").concat(_.text,`
`):"")+"".concat(E.reason?"failure reason: ".concat(E.reason,`
`):"")+"".concat(E.level?"level: ".concat(E.level,`
`):"")+"".concat(E.parent?"parent stream controller: ".concat(E.parent,`
`):"")+"".concat(E.buffer?"buffer length: ".concat(E.buffer,`
`):"")+"".concat(E.error?"error: ".concat(E.error,`
`):"")+"".concat(E.event?"event: ".concat(E.event,`
`):"")+"".concat(E.err?"error message: ".concat((w=E.err)===null||w===void 0?void 0:w.message,`
`):"");l("error",{player_error_code:T,player_error_message:x,player_error_context:P})}};t.on(r.Events.ERROR,m);var g=function(v,E){var T=E.frag,x=T&&T._url||"";l("requestcanceled",{request_event_type:v,request_url:x,request_type:"media",request_hostname:Ve(x)})};t.on(r.Events.FRAG_LOAD_EMERGENCY_ABORTED,g);var p=function(v,E){var T=E.level,x=t.levels[T];if(x&&x.attrs&&x.attrs.BANDWIDTH){var _=x.attrs.BANDWIDTH,I,b=parseFloat(x.attrs["FRAME-RATE"]);isNaN(b)||(I=b),_?l("renditionchange",{video_source_fps:I,video_source_bitrate:_,video_source_width:x.width,video_source_height:x.height,video_source_rendition_name:x.name,video_source_codec:x==null?void 0:x.videoCodec}):n.warn("missing BANDWIDTH from HLS manifest parsed by HLS.js")}};t.on(r.Events.LEVEL_SWITCHED,p),t._stopMuxMonitor=function(){t.off(r.Events.MANIFEST_LOADED,c),t.off(r.Events.LEVEL_LOADED,u),t.off(r.Events.AUDIO_TRACK_LOADED,d),t.off(r.Events.FRAG_LOADED,h),t.off(r.Events.FRAG_CHANGED,f),t.off(r.Events.ERROR,m),t.off(r.Events.FRAG_LOAD_EMERGENCY_ABORTED,g),t.off(r.Events.LEVEL_SWITCHED,p),t.off(r.Events.DESTROYING,t._stopMuxMonitor),delete t._stopMuxMonitor},t.on(r.Events.DESTROYING,t._stopMuxMonitor)},zd=function(s){s&&typeof s._stopMuxMonitor=="function"&&s._stopMuxMonitor()},wo=function(s,e){if(!s||!s.requestEndDate)return{};var t=Ve(s.url),i=s.url,r=s.bytesLoaded,n=new Date(s.requestStartDate).getTime(),a=new Date(s.firstByteDate).getTime(),o=new Date(s.requestEndDate).getTime(),l=isNaN(s.duration)?0:s.duration,c=typeof e.getMetricsFor=="function"?e.getMetricsFor(s.mediaType).HttpList:e.getDashMetrics().getHttpRequests(s.mediaType),u;c.length>0&&(u=cn(c[c.length-1]._responseHeaders||""));var d=u?Rs(u):void 0;return{requestStart:n,requestResponseStart:a,requestResponseEnd:o,requestBytesLoaded:r,requestResponseHeaders:u,requestMediaDuration:l,requestHostname:t,requestUrl:i,requestId:d}},Xd=function(s,e){var t=e.getQualityFor(s),i=e.getCurrentTrackFor(s).bitrateList;return i?{currentLevel:t,renditionWidth:i[t].width||null,renditionHeight:i[t].height||null,renditionBitrate:i[t].bandwidth}:{}},Qd=function(s){var e;return(e=s.match(/.*codecs\*?="(.*)"/))===null||e===void 0?void 0:e[1]},Jd=function(s){try{var e,t,i=(t=s.getVersion)===null||t===void 0||(e=t.call(s))===null||e===void 0?void 0:e.split(".").map(function(r){return parseInt(r)})[0];return i}catch{return!1}},Zd=function(s,e,t){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},r=s.log;if(!t||!t.on){r.warn("Invalid dash.js player reference. Monitoring blocked.");return}var n=Jd(t),a=function(T,x){return s.emit(e,T,x)},o=function(T){var x=T.type,_=T.data,I=(_||{}).url;a("requestcompleted",{request_event_type:x,request_start:0,request_response_start:0,request_response_end:0,request_bytes_loaded:-1,request_type:"manifest",request_hostname:Ve(I),request_url:I})};t.on("manifestLoaded",o);var l={},c=function(T){if(typeof T.getRequests!="function")return null;var x=T.getRequests({state:"executed"});return x.length===0?null:x[x.length-1]},u=function(T){var x=T.type,_=T.fragmentModel,I=T.chunk,b=c(_);d({type:x,request:b,chunk:I})},d=function(T){var x=T.type,_=T.chunk,I=T.request,b=(_||{}).mediaInfo,R=b||{},k=R.type,L=R.bitrateList;L=L||[];var w={};L.forEach(function(ee,X){w[X]={},w[X].width=ee.width,w[X].height=ee.height,w[X].bitrate=ee.bandwidth,w[X].attrs={}}),k==="video"?l.video=w:k==="audio"?l.audio=w:l.media=w;var P=wo(I,t),O=P.requestStart,W=P.requestResponseStart,q=P.requestResponseEnd,$=P.requestResponseHeaders,Z=P.requestMediaDuration,ne=P.requestHostname,H=P.requestUrl,B=P.requestId;a("requestcompleted",{request_event_type:x,request_start:O,request_response_start:W,request_response_end:q,request_bytes_loaded:-1,request_type:k+"_init",request_response_headers:$,request_hostname:ne,request_id:B,request_url:H,request_media_duration:Z,request_rendition_lists:l})};n>=4?t.on("initFragmentLoaded",d):t.on("initFragmentLoaded",u);var h=function(T){var x=T.type,_=T.fragmentModel,I=T.chunk,b=c(_);f({type:x,request:b,chunk:I})},f=function(T){var x=T.type,_=T.chunk,I=T.request,b=_||{},R=b.mediaInfo,k=b.start,L=R||{},w=L.type,P=wo(I,t),O=P.requestStart,W=P.requestResponseStart,q=P.requestResponseEnd,$=P.requestBytesLoaded,Z=P.requestResponseHeaders,ne=P.requestMediaDuration,H=P.requestHostname,B=P.requestUrl,ee=P.requestId,X=Xd(w,t),ae=X.currentLevel,ye=X.renditionWidth,ve=X.renditionHeight,_e=X.renditionBitrate;a("requestcompleted",{request_event_type:x,request_start:O,request_response_start:W,request_response_end:q,request_bytes_loaded:$,request_type:w,request_response_headers:Z,request_hostname:H,request_id:ee,request_url:B,request_media_start_time:k,request_media_duration:ne,request_current_level:ae,request_labeled_bitrate:_e,request_video_width:ye,request_video_height:ve})};n>=4?t.on("mediaFragmentLoaded",f):t.on("mediaFragmentLoaded",h);var m={video:void 0,audio:void 0,totalBitrate:void 0},g=function(){if(m.video&&typeof m.video.bitrate=="number"){if(!(m.video.width&&m.video.height)){r.warn("have bitrate info for video but missing width/height");return}var T=m.video.bitrate;if(m.audio&&typeof m.audio.bitrate=="number"&&(T+=m.audio.bitrate),T!==m.totalBitrate)return m.totalBitrate=T,{video_source_bitrate:T,video_source_height:m.video.height,video_source_width:m.video.width,video_source_codec:Qd(m.video.codec)}}},p=function(T,x,_){if(typeof T.newQuality!="number"){r.warn("missing evt.newQuality in qualityChangeRendered event",T);return}var I=T.mediaType;if(I==="audio"||I==="video"){var b=t.getBitrateInfoListFor(I).find(function(k){var L=k.qualityIndex;return L===T.newQuality});if(!(b&&typeof b.bitrate=="number")){r.warn("missing bitrate info for ".concat(I));return}m[I]=ln(As({},b),{codec:t.getCurrentTrackFor(I).codec});var R=g();R&&a("renditionchange",R)}};t.on("qualityChangeRendered",p);var v=function(T){var x=T.request,_=T.mediaType;x=x||{},a("requestcanceled",{request_event_type:x.type+"_"+x.action,request_url:x.url,request_type:_,request_hostname:Ve(x.url)})};t.on("fragmentLoadingAbandoned",v);var E=function(T){var x=T.error,_,I,b=(x==null||(_=x.data)===null||_===void 0?void 0:_.request)||{},R=(x==null||(I=x.data)===null||I===void 0?void 0:I.response)||{};(x==null?void 0:x.code)===27&&a("requestfailed",{request_error:b.type+"_"+b.action,request_url:b.url,request_hostname:Ve(b.url),request_type:b.mediaType,request_error_code:R.status,request_error_text:R.statusText});var k="".concat(b!=null&&b.url?"url: ".concat(b.url,`
`):"")+"".concat(R!=null&&R.status||R!=null&&R.statusText?"response: ".concat(R==null?void 0:R.status,", ").concat(R==null?void 0:R.statusText,`
`):"");a("error",{player_error_code:x==null?void 0:x.code,player_error_message:x==null?void 0:x.message,player_error_context:k})};t.on("error",E),t._stopMuxMonitor=function(){t.off("manifestLoaded",o),t.off("initFragmentLoaded",d),t.off("mediaFragmentLoaded",f),t.off("qualityChangeRendered",p),t.off("error",E),t.off("fragmentLoadingAbandoned",v),delete t._stopMuxMonitor}},eh=function(s){s&&typeof s._stopMuxMonitor=="function"&&s._stopMuxMonitor()},Co=0,th=function(){"use strict";function s(){Le(this,s),N(this,"_listeners",void 0)}return Ze(s,[{key:"on",value:function(e,t,i){return t._eventEmitterGuid=t._eventEmitterGuid||++Co,this._listeners=this._listeners||{},this._listeners[e]=this._listeners[e]||[],i&&(t=t.bind(i)),this._listeners[e].push(t),t}},{key:"off",value:function(e,t){var i=this._listeners&&this._listeners[e];i&&i.forEach(function(r,n){r._eventEmitterGuid===t._eventEmitterGuid&&i.splice(n,1)})}},{key:"one",value:function(e,t,i){var r=this;t._eventEmitterGuid=t._eventEmitterGuid||++Co;var n=function(){r.off(e,n),t.apply(i||this,arguments)};n._eventEmitterGuid=t._eventEmitterGuid,this.on(e,n)}},{key:"emit",value:function(e,t){var i=this;if(this._listeners){t=t||{};var r=this._listeners["before*"]||[],n=this._listeners[e]||[],a=this._listeners["after"+e]||[],o=function(l,c){l=l.slice(),l.forEach(function(u){u.call(i,{type:e},c)})};o(r,t),o(n,t),o(a,t)}}}]),s}(),ih=th,Qr=qe(Je()),sh=function(){"use strict";function s(e){var t=this;Le(this,s),N(this,"_playbackHeartbeatInterval",void 0),N(this,"_playheadShouldBeProgressing",void 0),N(this,"pm",void 0),this.pm=e,this._playbackHeartbeatInterval=null,this._playheadShouldBeProgressing=!1,e.on("playing",function(){t._playheadShouldBeProgressing=!0}),e.on("play",this._startPlaybackHeartbeatInterval.bind(this)),e.on("playing",this._startPlaybackHeartbeatInterval.bind(this)),e.on("adbreakstart",this._startPlaybackHeartbeatInterval.bind(this)),e.on("adplay",this._startPlaybackHeartbeatInterval.bind(this)),e.on("adplaying",this._startPlaybackHeartbeatInterval.bind(this)),e.on("devicewake",this._startPlaybackHeartbeatInterval.bind(this)),e.on("viewstart",this._startPlaybackHeartbeatInterval.bind(this)),e.on("rebufferstart",this._startPlaybackHeartbeatInterval.bind(this)),e.on("pause",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("ended",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("viewend",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("error",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("aderror",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("adpause",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("adended",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("adbreakend",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("seeked",function(){e.data.player_is_paused?t._stopPlaybackHeartbeatInterval():t._startPlaybackHeartbeatInterval()}),e.on("timeupdate",function(){t._playbackHeartbeatInterval!==null&&e.emit("playbackheartbeat")}),e.on("devicesleep",function(i,r){t._playbackHeartbeatInterval!==null&&(Qr.default.clearInterval(t._playbackHeartbeatInterval),e.emit("playbackheartbeatend",{viewer_time:r.viewer_time}),t._playbackHeartbeatInterval=null)})}return Ze(s,[{key:"_startPlaybackHeartbeatInterval",value:function(){var e=this;this._playbackHeartbeatInterval===null&&(this.pm.emit("playbackheartbeat"),this._playbackHeartbeatInterval=Qr.default.setInterval(function(){e.pm.emit("playbackheartbeat")},this.pm.playbackHeartbeatTime))}},{key:"_stopPlaybackHeartbeatInterval",value:function(){this._playheadShouldBeProgressing=!1,this._playbackHeartbeatInterval!==null&&(Qr.default.clearInterval(this._playbackHeartbeatInterval),this.pm.emit("playbackheartbeatend"),this._playbackHeartbeatInterval=null)}}]),s}(),rh=sh,nh=function s(e){"use strict";var t=this;Le(this,s),N(this,"viewErrored",void 0),e.on("viewinit",function(){t.viewErrored=!1}),e.on("error",function(i,r){try{var n=e.errorTranslator({player_error_code:r.player_error_code,player_error_message:r.player_error_message,player_error_context:r.player_error_context,player_error_severity:r.player_error_severity,player_error_business_exception:r.player_error_business_exception});n&&(e.data.player_error_code=n.player_error_code||r.player_error_code,e.data.player_error_message=n.player_error_message||r.player_error_message,e.data.player_error_context=n.player_error_context||r.player_error_context,e.data.player_error_severity=n.player_error_severity||r.player_error_severity,e.data.player_error_business_exception=n.player_error_business_exception||r.player_error_business_exception,t.viewErrored=!0)}catch(a){e.mux.log.warn("Exception in error translator callback.",a),t.viewErrored=!0}}),e.on("aftererror",function(){var i,r,n,a,o;(i=e.data)===null||i===void 0||delete i.player_error_code,(r=e.data)===null||r===void 0||delete r.player_error_message,(n=e.data)===null||n===void 0||delete n.player_error_context,(a=e.data)===null||a===void 0||delete a.player_error_severity,(o=e.data)===null||o===void 0||delete o.player_error_business_exception})},ah=nh,oh=function(){"use strict";function s(e){Le(this,s),N(this,"_watchTimeTrackerLastCheckedTime",void 0),N(this,"pm",void 0),this.pm=e,this._watchTimeTrackerLastCheckedTime=null,e.on("playbackheartbeat",this._updateWatchTime.bind(this)),e.on("playbackheartbeatend",this._clearWatchTimeState.bind(this))}return Ze(s,[{key:"_updateWatchTime",value:function(e,t){var i=t.viewer_time;this._watchTimeTrackerLastCheckedTime===null&&(this._watchTimeTrackerLastCheckedTime=i),Ee(this.pm.data,"view_watch_time",i-this._watchTimeTrackerLastCheckedTime),this._watchTimeTrackerLastCheckedTime=i}},{key:"_clearWatchTimeState",value:function(e,t){this._updateWatchTime(e,t),this._watchTimeTrackerLastCheckedTime=null}}]),s}(),lh=oh,ch=function(){"use strict";function s(e){var t=this;Le(this,s),N(this,"_playbackTimeTrackerLastPlayheadPosition",void 0),N(this,"_lastTime",void 0),N(this,"_isAdPlaying",void 0),N(this,"_callbackUpdatePlaybackTime",void 0),N(this,"pm",void 0),this.pm=e,this._playbackTimeTrackerLastPlayheadPosition=-1,this._lastTime=Se.now(),this._isAdPlaying=!1,this._callbackUpdatePlaybackTime=null;var i=this._startPlaybackTimeTracking.bind(this);e.on("playing",i),e.on("adplaying",i),e.on("seeked",i);var r=this._stopPlaybackTimeTracking.bind(this);e.on("playbackheartbeatend",r),e.on("seeking",r),e.on("adplaying",function(){t._isAdPlaying=!0}),e.on("adended",function(){t._isAdPlaying=!1}),e.on("adpause",function(){t._isAdPlaying=!1}),e.on("adbreakstart",function(){t._isAdPlaying=!1}),e.on("adbreakend",function(){t._isAdPlaying=!1}),e.on("adplay",function(){t._isAdPlaying=!1}),e.on("viewinit",function(){t._playbackTimeTrackerLastPlayheadPosition=-1,t._lastTime=Se.now(),t._isAdPlaying=!1,t._callbackUpdatePlaybackTime=null})}return Ze(s,[{key:"_startPlaybackTimeTracking",value:function(){this._callbackUpdatePlaybackTime===null&&(this._callbackUpdatePlaybackTime=this._updatePlaybackTime.bind(this),this._playbackTimeTrackerLastPlayheadPosition=this.pm.data.player_playhead_time,this.pm.on("playbackheartbeat",this._callbackUpdatePlaybackTime))}},{key:"_stopPlaybackTimeTracking",value:function(){this._callbackUpdatePlaybackTime&&(this._updatePlaybackTime(),this.pm.off("playbackheartbeat",this._callbackUpdatePlaybackTime),this._callbackUpdatePlaybackTime=null,this._playbackTimeTrackerLastPlayheadPosition=-1)}},{key:"_updatePlaybackTime",value:function(){var e=this.pm.data.player_playhead_time,t=Se.now(),i=-1;this._playbackTimeTrackerLastPlayheadPosition>=0&&e>this._playbackTimeTrackerLastPlayheadPosition?i=e-this._playbackTimeTrackerLastPlayheadPosition:this._isAdPlaying&&(i=t-this._lastTime),i>0&&i<=1e3&&Ee(this.pm.data,"view_content_playback_time",i),this._playbackTimeTrackerLastPlayheadPosition=e,this._lastTime=t}}]),s}(),uh=ch,dh=function(){"use strict";function s(e){Le(this,s),N(this,"pm",void 0),this.pm=e;var t=this._updatePlayheadTime.bind(this);e.on("playbackheartbeat",t),e.on("playbackheartbeatend",t),e.on("timeupdate",t),e.on("destroy",function(){e.off("timeupdate",t)})}return Ze(s,[{key:"_updateMaxPlayheadPosition",value:function(){this.pm.data.view_max_playhead_position=typeof this.pm.data.view_max_playhead_position=="undefined"?this.pm.data.player_playhead_time:Math.max(this.pm.data.view_max_playhead_position,this.pm.data.player_playhead_time)}},{key:"_updatePlayheadTime",value:function(e,t){var i=this,r=function(){i.pm.currentFragmentPDT&&i.pm.currentFragmentStart&&(i.pm.data.player_program_time=i.pm.currentFragmentPDT+i.pm.data.player_playhead_time-i.pm.currentFragmentStart)};if(t&&t.player_playhead_time)this.pm.data.player_playhead_time=t.player_playhead_time,r(),this._updateMaxPlayheadPosition();else if(this.pm.getPlayheadTime){var n=this.pm.getPlayheadTime();typeof n!="undefined"&&(this.pm.data.player_playhead_time=n,r(),this._updateMaxPlayheadPosition())}}}]),s}(),hh=dh,Po=5*60*1e3,fh=function s(e){"use strict";if(Le(this,s),!e.disableRebufferTracking){var t,i=function(n,a){r(a),t=void 0},r=function(n){if(t){var a=n.viewer_time-t;Ee(e.data,"view_rebuffer_duration",a),t=n.viewer_time,e.data.view_rebuffer_duration>Po&&(e.emit("viewend"),e.send("viewend"),e.mux.log.warn("Ending view after rebuffering for longer than ".concat(Po,"ms, future events will be ignored unless a programchange or videochange occurs.")))}e.data.view_watch_time>=0&&e.data.view_rebuffer_count>0&&(e.data.view_rebuffer_frequency=e.data.view_rebuffer_count/e.data.view_watch_time,e.data.view_rebuffer_percentage=e.data.view_rebuffer_duration/e.data.view_watch_time)};e.on("playbackheartbeat",function(n,a){return r(a)}),e.on("rebufferstart",function(n,a){t||(Ee(e.data,"view_rebuffer_count",1),t=a.viewer_time,e.one("rebufferend",i))}),e.on("viewinit",function(){t=void 0,e.off("rebufferend",i)})}},mh=fh,gh=function(){"use strict";function s(e){var t=this;Le(this,s),N(this,"_lastCheckedTime",void 0),N(this,"_lastPlayheadTime",void 0),N(this,"_lastPlayheadTimeUpdatedTime",void 0),N(this,"_rebuffering",void 0),N(this,"pm",void 0),this.pm=e,!(e.disableRebufferTracking||e.disablePlayheadRebufferTracking)&&(this._lastCheckedTime=null,this._lastPlayheadTime=null,this._lastPlayheadTimeUpdatedTime=null,e.on("playbackheartbeat",this._checkIfRebuffering.bind(this)),e.on("playbackheartbeatend",this._cleanupRebufferTracker.bind(this)),e.on("seeking",function(){t._cleanupRebufferTracker(null,{viewer_time:Se.now()})}))}return Ze(s,[{key:"_checkIfRebuffering",value:function(e,t){if(this.pm.seekingTracker.isSeeking||this.pm.adTracker.isAdBreak||!this.pm.playbackHeartbeat._playheadShouldBeProgressing){this._cleanupRebufferTracker(e,t);return}if(this._lastCheckedTime===null){this._prepareRebufferTrackerState(t.viewer_time);return}if(this._lastPlayheadTime!==this.pm.data.player_playhead_time){this._cleanupRebufferTracker(e,t,!0);return}var i=t.viewer_time-this._lastPlayheadTimeUpdatedTime;typeof this.pm.sustainedRebufferThreshold=="number"&&i>=this.pm.sustainedRebufferThreshold&&(this._rebuffering||(this._rebuffering=!0,this.pm.emit("rebufferstart",{viewer_time:this._lastPlayheadTimeUpdatedTime}))),this._lastCheckedTime=t.viewer_time}},{key:"_clearRebufferTrackerState",value:function(){this._lastCheckedTime=null,this._lastPlayheadTime=null,this._lastPlayheadTimeUpdatedTime=null}},{key:"_prepareRebufferTrackerState",value:function(e){this._lastCheckedTime=e,this._lastPlayheadTime=this.pm.data.player_playhead_time,this._lastPlayheadTimeUpdatedTime=e}},{key:"_cleanupRebufferTracker",value:function(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(this._rebuffering)this._rebuffering=!1,this.pm.emit("rebufferend",{viewer_time:t.viewer_time});else{if(this._lastCheckedTime===null)return;var r=this.pm.data.player_playhead_time-this._lastPlayheadTime,n=t.viewer_time-this._lastPlayheadTimeUpdatedTime;typeof this.pm.minimumRebufferDuration=="number"&&r>0&&n-r>this.pm.minimumRebufferDuration&&(this._lastCheckedTime=null,this.pm.emit("rebufferstart",{viewer_time:this._lastPlayheadTimeUpdatedTime}),this.pm.emit("rebufferend",{viewer_time:this._lastPlayheadTimeUpdatedTime+n-r}))}i?this._prepareRebufferTrackerState(t.viewer_time):this._clearRebufferTrackerState()}}]),s}(),ph=gh,yh=function(){"use strict";function s(e){var t=this;Le(this,s),N(this,"NAVIGATION_START",void 0),N(this,"pm",void 0),this.pm=e,e.on("viewinit",function(){var i=e.data,r=i.view_id;if(!i.view_program_changed){var n=function(a,o){var l=o.viewer_time;(a.type==="playing"&&typeof e.data.view_time_to_first_frame=="undefined"||a.type==="adplaying"&&(typeof e.data.view_time_to_first_frame=="undefined"||t._inPrerollPosition()))&&t.calculateTimeToFirstFrame(l||Se.now(),r)};e.one("playing",n),e.one("adplaying",n),e.one("viewend",function(){e.off("playing",n),e.off("adplaying",n)})}})}return Ze(s,[{key:"_inPrerollPosition",value:function(){return typeof this.pm.data.view_content_playback_time=="undefined"||this.pm.data.view_content_playback_time<=1e3}},{key:"calculateTimeToFirstFrame",value:function(e,t){t===this.pm.data.view_id&&(this.pm.watchTimeTracker._updateWatchTime(null,{viewer_time:e}),this.pm.data.view_time_to_first_frame=this.pm.data.view_watch_time,(this.pm.data.player_autoplay_on||this.pm.data.video_is_autoplay)&&this.NAVIGATION_START&&(this.pm.data.view_aggregate_startup_time=this.pm.data.view_start+this.pm.data.view_watch_time-this.NAVIGATION_START))}}]),s}(),vh=yh,Eh=function s(e){"use strict";var t=this;Le(this,s),N(this,"_lastPlayerHeight",void 0),N(this,"_lastPlayerWidth",void 0),N(this,"_lastPlayheadPosition",void 0),N(this,"_lastSourceHeight",void 0),N(this,"_lastSourceWidth",void 0),e.on("viewinit",function(){t._lastPlayheadPosition=-1});var i=["pause","rebufferstart","seeking","error","adbreakstart","hb"],r=["playing","hb"];i.forEach(function(n){e.on(n,function(){if(t._lastPlayheadPosition>=0&&e.data.player_playhead_time>=0&&t._lastPlayerWidth>=0&&t._lastSourceWidth>0&&t._lastPlayerHeight>=0&&t._lastSourceHeight>0){var a=e.data.player_playhead_time-t._lastPlayheadPosition;if(a<0){t._lastPlayheadPosition=-1;return}var o=Math.min(t._lastPlayerWidth/t._lastSourceWidth,t._lastPlayerHeight/t._lastSourceHeight),l=Math.max(0,o-1),c=Math.max(0,1-o);e.data.view_max_upscale_percentage=Math.max(e.data.view_max_upscale_percentage||0,l),e.data.view_max_downscale_percentage=Math.max(e.data.view_max_downscale_percentage||0,c),Ee(e.data,"view_total_content_playback_time",a),Ee(e.data,"view_total_upscaling",l*a),Ee(e.data,"view_total_downscaling",c*a)}t._lastPlayheadPosition=-1})}),r.forEach(function(n){e.on(n,function(){t._lastPlayheadPosition=e.data.player_playhead_time,t._lastPlayerWidth=e.data.player_width,t._lastPlayerHeight=e.data.player_height,t._lastSourceWidth=e.data.video_source_width,t._lastSourceHeight=e.data.video_source_height})})},Th=Eh,xh=2e3,_h=function s(e){"use strict";var t=this;Le(this,s),N(this,"isSeeking",void 0),this.isSeeking=!1;var i=-1,r=function(){var n=Se.now(),a=(e.data.viewer_time||n)-(i||n);Ee(e.data,"view_seek_duration",a),e.data.view_max_seek_time=Math.max(e.data.view_max_seek_time||0,a),t.isSeeking=!1,i=-1};e.on("seeking",function(n,a){if(Object.assign(e.data,a),t.isSeeking&&a.viewer_time-i<=xh){i=a.viewer_time;return}t.isSeeking&&r(),t.isSeeking=!0,i=a.viewer_time,Ee(e.data,"view_seek_count",1),e.send("seeking")}),e.on("seeked",function(){r()}),e.on("viewend",function(){t.isSeeking&&(r(),e.send("seeked")),t.isSeeking=!1,i=-1})},Sh=_h,Oo=function(s,e){s.push(e),s.sort(function(t,i){return t.viewer_time-i.viewer_time})},bh=["adbreakstart","adrequest","adresponse","adplay","adplaying","adpause","adended","adbreakend","aderror","adclicked","adskipped"],Ah=function(){"use strict";function s(e){var t=this;Le(this,s),N(this,"_adHasPlayed",void 0),N(this,"_adRequests",void 0),N(this,"_adResponses",void 0),N(this,"_currentAdRequestNumber",void 0),N(this,"_currentAdResponseNumber",void 0),N(this,"_prerollPlayTime",void 0),N(this,"_wouldBeNewAdPlay",void 0),N(this,"isAdBreak",void 0),N(this,"pm",void 0),this.pm=e,e.on("viewinit",function(){t.isAdBreak=!1,t._currentAdRequestNumber=0,t._currentAdResponseNumber=0,t._adRequests=[],t._adResponses=[],t._adHasPlayed=!1,t._wouldBeNewAdPlay=!0,t._prerollPlayTime=void 0}),bh.forEach(function(r){return e.on(r,t._updateAdData.bind(t))});var i=function(){t.isAdBreak=!1};e.on("adbreakstart",function(){t.isAdBreak=!0}),e.on("play",i),e.on("playing",i),e.on("viewend",i),e.on("adrequest",function(r,n){n=Object.assign({ad_request_id:"generatedAdRequestId"+t._currentAdRequestNumber++},n),Oo(t._adRequests,n),Ee(e.data,"view_ad_request_count"),t.inPrerollPosition()&&(e.data.view_preroll_requested=!0,t._adHasPlayed||Ee(e.data,"view_preroll_request_count"))}),e.on("adresponse",function(r,n){n=Object.assign({ad_request_id:"generatedAdRequestId"+t._currentAdResponseNumber++},n),Oo(t._adResponses,n);var a=t.findAdRequest(n.ad_request_id);a&&Ee(e.data,"view_ad_request_time",Math.max(0,n.viewer_time-a.viewer_time))}),e.on("adplay",function(r,n){t._adHasPlayed=!0,t._wouldBeNewAdPlay&&(t._wouldBeNewAdPlay=!1,Ee(e.data,"view_ad_played_count")),t.inPrerollPosition()&&!e.data.view_preroll_played&&(e.data.view_preroll_played=!0,t._adRequests.length>0&&(e.data.view_preroll_request_time=Math.max(0,n.viewer_time-t._adRequests[0].viewer_time)),e.data.view_start&&(e.data.view_startup_preroll_request_time=Math.max(0,n.viewer_time-e.data.view_start)),t._prerollPlayTime=n.viewer_time)}),e.on("adplaying",function(r,n){t.inPrerollPosition()&&typeof e.data.view_preroll_load_time=="undefined"&&typeof t._prerollPlayTime!="undefined"&&(e.data.view_preroll_load_time=n.viewer_time-t._prerollPlayTime,e.data.view_startup_preroll_load_time=n.viewer_time-t._prerollPlayTime)}),e.on("adclicked",function(r,n){t._wouldBeNewAdPlay||Ee(e.data,"view_ad_clicked_count")}),e.on("adskipped",function(r,n){t._wouldBeNewAdPlay||Ee(e.data,"view_ad_skipped_count")}),e.on("adended",function(){t._wouldBeNewAdPlay=!0}),e.on("aderror",function(){t._wouldBeNewAdPlay=!0})}return Ze(s,[{key:"inPrerollPosition",value:function(){return typeof this.pm.data.view_content_playback_time=="undefined"||this.pm.data.view_content_playback_time<=1e3}},{key:"findAdRequest",value:function(e){for(var t=0;t<this._adRequests.length;t++)if(this._adRequests[t].ad_request_id===e)return this._adRequests[t]}},{key:"_updateAdData",value:function(e,t){if(this.inPrerollPosition()){if(!this.pm.data.view_preroll_ad_tag_hostname&&t.ad_tag_url){var i=at($i(t.ad_tag_url),2),r=i[0],n=i[1];this.pm.data.view_preroll_ad_tag_domain=n,this.pm.data.view_preroll_ad_tag_hostname=r}if(!this.pm.data.view_preroll_ad_asset_hostname&&t.ad_asset_url){var a=at($i(t.ad_asset_url),2),o=a[0],l=a[1];this.pm.data.view_preroll_ad_asset_domain=l,this.pm.data.view_preroll_ad_asset_hostname=o}}this.pm.data.ad_asset_url=t==null?void 0:t.ad_asset_url,this.pm.data.ad_tag_url=t==null?void 0:t.ad_tag_url,this.pm.data.ad_creative_id=t==null?void 0:t.ad_creative_id,this.pm.data.ad_id=t==null?void 0:t.ad_id,this.pm.data.ad_universal_id=t==null?void 0:t.ad_universal_id}}]),s}(),Rh=Ah,Mo=qe(Je()),Lh=function s(e){"use strict";Le(this,s);var t,i,r=function(){e.disableRebufferTracking||(Ee(e.data,"view_waiting_rebuffer_count",1),t=Se.now(),i=Mo.default.setInterval(function(){if(t){var c=Se.now();Ee(e.data,"view_waiting_rebuffer_duration",c-t),t=c}},250))},n=function(){e.disableRebufferTracking||t&&(Ee(e.data,"view_waiting_rebuffer_duration",Se.now()-t),t=!1,Mo.default.clearInterval(i))},a=!1,o=function(){a=!0},l=function(){a=!1,n()};e.on("waiting",function(){a&&r()}),e.on("playing",function(){n(),o()}),e.on("pause",l),e.on("seeking",l)},Ih=Lh,Dh=function s(e){"use strict";var t=this;Le(this,s),N(this,"lastWallClockTime",void 0);var i=function(){t.lastWallClockTime=Se.now(),e.on("before*",r)},r=function(n){var a=Se.now(),o=t.lastWallClockTime;t.lastWallClockTime=a,a-o>3e4&&(e.emit("devicesleep",{viewer_time:o}),Object.assign(e.data,{viewer_time:o}),e.send("devicesleep"),e.emit("devicewake",{viewer_time:a}),Object.assign(e.data,{viewer_time:a}),e.send("devicewake"))};e.one("playbackheartbeat",i),e.on("playbackheartbeatend",function(){e.off("before*",r),e.one("playbackheartbeat",i)})},kh=Dh,Jr=qe(Je()),jo=function(s){return s()}(function(){var s=function(){for(var t=0,i={};t<arguments.length;t++){var r=arguments[t];for(var n in r)i[n]=r[n]}return i};function e(t){function i(r,n,a){var o;if(typeof document!="undefined"){if(arguments.length>1){if(a=s({path:"/"},i.defaults,a),typeof a.expires=="number"){var l=new Date;l.setMilliseconds(l.getMilliseconds()+a.expires*864e5),a.expires=l}try{o=JSON.stringify(n),/^[\{\[]/.test(o)&&(n=o)}catch{}return t.write?n=t.write(n,r):n=encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),r=encodeURIComponent(String(r)),r=r.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),r=r.replace(/[\(\)]/g,escape),document.cookie=[r,"=",n,a.expires?"; expires="+a.expires.toUTCString():"",a.path?"; path="+a.path:"",a.domain?"; domain="+a.domain:"",a.secure?"; secure":""].join("")}r||(o={});for(var c=document.cookie?document.cookie.split("; "):[],u=/(%[0-9A-Z]{2})+/g,d=0;d<c.length;d++){var h=c[d].split("="),f=h.slice(1).join("=");f.charAt(0)==='"'&&(f=f.slice(1,-1));try{var m=h[0].replace(u,decodeURIComponent);if(f=t.read?t.read(f,m):t(f,m)||f.replace(u,decodeURIComponent),this.json)try{f=JSON.parse(f)}catch{}if(r===m){o=f;break}r||(o[m]=f)}catch{}}return o}}return i.set=i,i.get=function(r){return i.call(i,r)},i.getJSON=function(){return i.apply({json:!0},[].slice.call(arguments))},i.defaults={},i.remove=function(r,n){i(r,"",s(n,{expires:-1}))},i.withConverter=e,i}return e(function(){})}),zo="muxData",wh=function(s){return Object.entries(s).map(function(e){var t=at(e,2),i=t[0],r=t[1];return"".concat(i,"=").concat(r)}).join("&")},Ch=function(s){return s.split("&").reduce(function(e,t){var i=at(t.split("="),2),r=i[0],n=i[1],a=+n,o=n&&a==n?a:n;return e[r]=o,e},{})},Xo=function(){var s;try{s=Ch(jo.get(zo)||"")}catch{s={}}return s},Qo=function(s){try{jo.set(zo,wh(s),{expires:365})}catch{}},Ph=function(){var s=Xo();return s.mux_viewer_id=s.mux_viewer_id||Bi(),s.msn=s.msn||Math.random(),Qo(s),{mux_viewer_id:s.mux_viewer_id,mux_sample_number:s.msn}},Oh=function(){var s=Xo(),e=Se.now();return s.session_start&&(s.sst=s.session_start,delete s.session_start),s.session_id&&(s.sid=s.session_id,delete s.session_id),s.session_expires&&(s.sex=s.session_expires,delete s.session_expires),(!s.sex||s.sex<e)&&(s.sid=Bi(),s.sst=e),s.sex=e+25*60*1e3,Qo(s),{session_id:s.sid,session_start:s.sst,session_expires:s.sex}};function Mh(s,e){var t=e.beaconCollectionDomain,i=e.beaconDomain;if(t)return"https://"+t;s=s||"inferred";var r=i||"litix.io";return s.match(/^[a-z0-9]+$/)?"https://"+s+"."+r:"https://img.litix.io/a.gif"}var Nh=qe(Je()),Jo=function(){var s;switch(Zo()){case"cellular":s="cellular";break;case"ethernet":s="wired";break;case"wifi":s="wifi";break;case void 0:break;default:s="other"}return s},Zo=function(){var s=Nh.default.navigator,e=s&&(s.connection||s.mozConnection||s.webkitConnection);return e&&e.type};Jo.getConnectionFromAPI=Zo;var Fh=Jo,Uh={a:"env",b:"beacon",c:"custom",d:"ad",e:"event",f:"experiment",i:"internal",m:"mux",n:"response",p:"player",q:"request",r:"retry",s:"session",t:"timestamp",u:"viewer",v:"video",w:"page",x:"view",y:"sub"},Bh=el(Uh),$h={ad:"ad",ag:"aggregate",ap:"api",al:"application",ar:"architecture",as:"asset",au:"autoplay",av:"average",bi:"bitrate",br:"break",bw:"browser",by:"bytes",bz:"business",ca:"cached",cb:"cancel",cc:"codec",cd:"code",cg:"category",ch:"changed",ck:"clicked",cl:"canceled",cn:"config",co:"count",ce:"counter",cp:"complete",cr:"creative",ct:"content",cu:"current",cx:"connection",cz:"context",dg:"downscaling",dm:"domain",dn:"cdn",do:"downscale",dr:"drm",dp:"dropped",du:"duration",dv:"device",ec:"encoding",ed:"edge",en:"end",eg:"engine",em:"embed",er:"error",ep:"experiments",es:"errorcode",et:"errortext",ee:"event",ev:"events",ex:"expires",ez:"exception",fa:"failed",fi:"first",fm:"family",ft:"format",fp:"fps",fq:"frequency",fr:"frame",fs:"fullscreen",ha:"has",hb:"holdback",he:"headers",ho:"host",hn:"hostname",ht:"height",id:"id",ii:"init",in:"instance",ip:"ip",is:"is",ke:"key",la:"language",lb:"labeled",le:"level",li:"live",ld:"loaded",lo:"load",ls:"lists",lt:"latency",ma:"max",md:"media",me:"message",mf:"manifest",mi:"mime",ml:"midroll",mm:"min",mn:"manufacturer",mo:"model",mx:"mux",ne:"newest",nm:"name",no:"number",on:"on",os:"os",pa:"paused",pb:"playback",pd:"producer",pe:"percentage",pf:"played",pg:"program",ph:"playhead",pi:"plugin",pl:"preroll",pn:"playing",po:"poster",pr:"preload",ps:"position",pt:"part",py:"property",ra:"rate",rd:"requested",re:"rebuffer",rf:"rendition",rm:"remote",ro:"ratio",rp:"response",rq:"request",rs:"requests",sa:"sample",sd:"skipped",se:"session",sk:"seek",sm:"stream",so:"source",sq:"sequence",sr:"series",st:"start",su:"startup",sv:"server",sw:"software",sy:"severity",ta:"tag",tc:"tech",te:"text",tg:"target",th:"throughput",ti:"time",tl:"total",to:"to",tt:"title",ty:"type",ug:"upscaling",un:"universal",up:"upscale",ur:"url",us:"user",va:"variant",vd:"viewed",vi:"video",ve:"version",vw:"view",vr:"viewer",wd:"width",wa:"watch",wt:"waiting"},No=el($h);function el(s){var e={};for(var t in s)s.hasOwnProperty(t)&&(e[s[t]]=t);return e}function nn(s){var e={},t={};return Object.keys(s).forEach(function(i){var r=!1;if(s.hasOwnProperty(i)&&s[i]!==void 0){var n=i.split("_"),a=n[0],o=Bh[a];o||(ge.info("Data key word `"+n[0]+"` not expected in "+i),o=a+"_"),n.splice(1).forEach(function(l){l==="url"&&(r=!0),No[l]?o+=No[l]:Number(l)&&Math.floor(Number(l))===Number(l)?o+=l:(ge.info("Data key word `"+l+"` not expected in "+i),o+="_"+l+"_")}),r?t[o]=s[i]:e[o]=s[i]}}),Object.assign(e,t)}var Gt=qe(Je()),Gh={maxBeaconSize:300,maxQueueLength:3600,baseTimeBetweenBeacons:1e4,maxPayloadKBSize:500},Kh=56*1024,Hh=["hb","requestcompleted","requestfailed","requestcanceled"],Vh="https://img.litix.io",ot=function(s){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this._beaconUrl=s||Vh,this._eventQueue=[],this._postInFlight=!1,this._failureCount=0,this._sendTimeout=!1,this._options=Object.assign({},Gh,e)};ot.prototype.queueEvent=function(s,e){var t=Object.assign({},e);return this._eventQueue.length<=this._options.maxQueueLength||s==="eventrateexceeded"?(this._eventQueue.push(t),this._sendTimeout||this._startBeaconSending(),this._eventQueue.length<=this._options.maxQueueLength):!1};ot.prototype.flushEvents=function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(s&&this._eventQueue.length===1){this._eventQueue.pop();return}this._eventQueue.length&&this._sendBeaconQueue(),this._startBeaconSending()};ot.prototype.destroy=function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;this.destroyed=!0,s?this._clearBeaconQueue():this.flushEvents(),Gt.default.clearTimeout(this._sendTimeout)};ot.prototype._clearBeaconQueue=function(){var s=this._eventQueue.length>this._options.maxBeaconSize?this._eventQueue.length-this._options.maxBeaconSize:0,e=this._eventQueue.slice(s);s>0&&Object.assign(e[e.length-1],nn({mux_view_message:"event queue truncated"}));var t=this._createPayload(e);tl(this._beaconUrl,t,!0,function(){})};ot.prototype._sendBeaconQueue=function(){var s=this;if(!this._postInFlight){var e=this._eventQueue.slice(0,this._options.maxBeaconSize);this._eventQueue=this._eventQueue.slice(this._options.maxBeaconSize),this._postInFlight=!0;var t=this._createPayload(e),i=Se.now();tl(this._beaconUrl,t,!1,function(r,n){n?(s._eventQueue=e.concat(s._eventQueue),s._failureCount+=1,ge.info("Error sending beacon: "+n)):s._failureCount=0,s._roundTripTime=Se.now()-i,s._postInFlight=!1})}};ot.prototype._getNextBeaconTime=function(){if(!this._failureCount)return this._options.baseTimeBetweenBeacons;var s=Math.pow(2,this._failureCount-1);return s=s*Math.random(),(1+s)*this._options.baseTimeBetweenBeacons};ot.prototype._startBeaconSending=function(){var s=this;Gt.default.clearTimeout(this._sendTimeout),!this.destroyed&&(this._sendTimeout=Gt.default.setTimeout(function(){s._eventQueue.length&&s._sendBeaconQueue(),s._startBeaconSending()},this._getNextBeaconTime()))};ot.prototype._createPayload=function(s){var e=this,t={transmission_timestamp:Math.round(Se.now())};this._roundTripTime&&(t.rtt_ms=Math.round(this._roundTripTime));var i,r,n,a=function(){i=JSON.stringify({metadata:t,events:r||s}),n=i.length/1024},o=function(){return n<=e._options.maxPayloadKBSize};return a(),o()||(ge.info("Payload size is too big ("+n+" kb). Removing unnecessary events."),r=s.filter(function(l){return Hh.indexOf(l.e)===-1}),a()),o()||(ge.info("Payload size still too big ("+n+" kb). Cropping fields.."),r.forEach(function(l){for(var c in l){var u=l[c],d=50*1024;typeof u=="string"&&u.length>d&&(l[c]=u.substring(0,d))}}),a()),i};var qh=function(s){return s.length<=Kh},tl=function(s,e,t,i){if(t&&navigator&&navigator.sendBeacon&&navigator.sendBeacon(s,e)){i();return}if(Gt.default.fetch){Gt.default.fetch(s,{method:"POST",body:e,headers:{"Content-Type":"text/plain"},keepalive:qh(e)}).then(function(n){return i(null,n.ok?null:"Error")}).catch(function(n){return i(null,n)});return}if(Gt.default.XMLHttpRequest){var r=new Gt.default.XMLHttpRequest;r.onreadystatechange=function(){if(r.readyState===4)return i(null,r.status!==200?"error":void 0)},r.open("POST",s),r.setRequestHeader("Content-Type","text/plain"),r.send(e);return}i()},Wh=ot,Yh=["env_key","view_id","view_sequence_number","player_sequence_number","beacon_domain","player_playhead_time","viewer_time","mux_api_version","event","video_id","player_instance_id","player_error_code","player_error_message","player_error_context","player_error_severity","player_error_business_exception"],jh=["adplay","adplaying","adpause","adfirstquartile","admidpoint","adthirdquartile","adended","adresponse","adrequest"],zh=["ad_id","ad_creative_id","ad_universal_id"],Xh=["viewstart","error","ended","viewend"],Qh=10*60*1e3,Jh=function(){"use strict";function s(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Le(this,s);var r,n,a,o,l,c,u,d,h,f,m,g;N(this,"mux",void 0),N(this,"envKey",void 0),N(this,"options",void 0),N(this,"eventQueue",void 0),N(this,"sampleRate",void 0),N(this,"disableCookies",void 0),N(this,"respectDoNotTrack",void 0),N(this,"previousBeaconData",void 0),N(this,"lastEventTime",void 0),N(this,"rateLimited",void 0),N(this,"pageLevelData",void 0),N(this,"viewerData",void 0),this.mux=e,this.envKey=t,this.options=i,this.previousBeaconData=null,this.lastEventTime=0,this.rateLimited=!1,this.eventQueue=new Wh(Mh(this.envKey,this.options));var p;this.sampleRate=(p=this.options.sampleRate)!==null&&p!==void 0?p:1;var v;this.disableCookies=(v=this.options.disableCookies)!==null&&v!==void 0?v:!1;var E;this.respectDoNotTrack=(E=this.options.respectDoNotTrack)!==null&&E!==void 0?E:!1,this.previousBeaconData=null,this.lastEventTime=0,this.rateLimited=!1,this.pageLevelData={mux_api_version:this.mux.API_VERSION,mux_embed:this.mux.NAME,mux_embed_version:this.mux.VERSION,viewer_application_name:(r=this.options.platform)===null||r===void 0?void 0:r.name,viewer_application_version:(n=this.options.platform)===null||n===void 0?void 0:n.version,viewer_application_engine:(a=this.options.platform)===null||a===void 0?void 0:a.layout,viewer_device_name:(o=this.options.platform)===null||o===void 0?void 0:o.product,viewer_device_category:"",viewer_device_manufacturer:(l=this.options.platform)===null||l===void 0?void 0:l.manufacturer,viewer_os_family:(u=this.options.platform)===null||u===void 0||(c=u.os)===null||c===void 0?void 0:c.family,viewer_os_architecture:(h=this.options.platform)===null||h===void 0||(d=h.os)===null||d===void 0?void 0:d.architecture,viewer_os_version:(m=this.options.platform)===null||m===void 0||(f=m.os)===null||f===void 0?void 0:f.version,viewer_connection_type:Fh(),page_url:Jr.default===null||Jr.default===void 0||(g=Jr.default.location)===null||g===void 0?void 0:g.href},this.viewerData=this.disableCookies?{}:Ph()}return Ze(s,[{key:"send",value:function(e,t){if(!(!e||!(t!=null&&t.view_id))){if(this.respectDoNotTrack&&sn())return ge.info("Not sending `"+e+"` because Do Not Track is enabled");if(!t||typeof t!="object")return ge.error("A data object was expected in send() but was not provided");var i=this.disableCookies?{}:Oh(),r=ln(As({},this.pageLevelData,t,i,this.viewerData),{event:e,env_key:this.envKey});r.user_id&&(r.viewer_user_id=r.user_id,delete r.user_id);var n,a=((n=r.mux_sample_number)!==null&&n!==void 0?n:0)>=this.sampleRate,o=this._deduplicateBeaconData(e,r),l=nn(o);if(this.lastEventTime=this.mux.utils.now(),a)return ge.info("Not sending event due to sample rate restriction",e,r,l);if(this.envKey||ge.info("Missing environment key (envKey) - beacons will be dropped if the video source is not a valid mux video URL",e,r,l),!this.rateLimited){if(ge.info("Sending event",e,r,l),this.rateLimited=!this.eventQueue.queueEvent(e,l),this.mux.WINDOW_UNLOADING&&e==="viewend")this.eventQueue.destroy(!0);else if(this.mux.WINDOW_HIDDEN&&e==="hb"?this.eventQueue.flushEvents(!0):Xh.indexOf(e)>=0&&this.eventQueue.flushEvents(),this.rateLimited)return r.event="eventrateexceeded",l=nn(r),this.eventQueue.queueEvent(r.event,l),ge.error("Beaconing disabled due to rate limit.")}}}},{key:"destroy",value:function(){this.eventQueue.destroy(!1)}},{key:"_deduplicateBeaconData",value:function(e,t){var i=this,r={},n=t.view_id;if(n==="-1"||e==="viewstart"||e==="viewend"||!this.previousBeaconData||this.mux.utils.now()-this.lastEventTime>=Qh)r=As({},t),n&&(this.previousBeaconData=r),n&&e==="viewend"&&(this.previousBeaconData=null);else{var a=e.indexOf("request")===0;Object.entries(t).forEach(function(o){var l=at(o,2),c=l[0],u=l[1];i.previousBeaconData&&(u!==i.previousBeaconData[c]||Yh.indexOf(c)>-1||i.objectHasChanged(a,c,u,i.previousBeaconData[c])||i.eventRequiresKey(e,c))&&(r[c]=u,i.previousBeaconData[c]=u)})}return r}},{key:"objectHasChanged",value:function(e,t,i,r){return!e||t.indexOf("request_")!==0?!1:t==="request_response_headers"||typeof i!="object"||typeof r!="object"?!0:Object.keys(i||{}).length!==Object.keys(r||{}).length}},{key:"eventRequiresKey",value:function(e,t){return!!(e==="renditionchange"&&t.indexOf("video_source_")===0||zh.includes(t)&&jh.includes(e))}}]),s}(),Zh=function s(e){"use strict";Le(this,s);var t=0,i=0,r=0,n=0,a=0,o=0,l=0,c=function(h,f){var m=f.request_start,g=f.request_response_start,p=f.request_response_end,v=f.request_bytes_loaded;n++;var E,T;if(g?(E=g-(m!=null?m:0),T=(p!=null?p:0)-g):T=(p!=null?p:0)-(m!=null?m:0),T>0&&v&&v>0){var x=v/T*8e3;a++,i+=v,r+=T,e.data.view_min_request_throughput=Math.min(e.data.view_min_request_throughput||1/0,x),e.data.view_average_request_throughput=i/r*8e3,e.data.view_request_count=n,E>0&&(t+=E,e.data.view_max_request_latency=Math.max(e.data.view_max_request_latency||0,E),e.data.view_average_request_latency=t/a)}},u=function(h,f){n++,o++,e.data.view_request_count=n,e.data.view_request_failed_count=o},d=function(h,f){n++,l++,e.data.view_request_count=n,e.data.view_request_canceled_count=l};e.on("requestcompleted",c),e.on("requestfailed",u),e.on("requestcanceled",d)},ef=Zh,tf=60*60*1e3,sf=function s(e){"use strict";var t=this;Le(this,s),N(this,"_lastEventTime",void 0),e.on("before*",function(i,r){var n=r.viewer_time,a=Se.now(),o=t._lastEventTime;if(t._lastEventTime=a,o&&a-o>tf){var l=Object.keys(e.data).reduce(function(c,u){return u.indexOf("video_")===0?Object.assign(c,N({},u,e.data[u])):c},{});e.mux.log.info("Received event after at least an hour inactivity, creating a new view"),e.emit("viewinit",Object.assign({viewer_time:n},l)),e.playbackHeartbeat._playheadShouldBeProgressing&&i.type!=="play"&&i.type!=="adbreakstart"&&(e.emit("play",{viewer_time:n}),i.type!=="playing"&&e.emit("playing",{viewer_time:n}))}})},rf=sf,nf=["viewstart","ended","loadstart","pause","play","playing","ratechange","waiting","adplay","adpause","adended","aderror","adplaying","adrequest","adresponse","adbreakstart","adbreakend","adfirstquartile","admidpoint","adthirdquartile","rebufferstart","rebufferend","seeked","error","hb","requestcompleted","requestfailed","requestcanceled","renditionchange"],af=new Set(["requestcompleted","requestfailed","requestcanceled"]),of=function(s){"use strict";Bd(t,s);var e=Kd(t);function t(i,r,n){Le(this,t);var a;a=e.call(this),N(Q(a),"DOM_CONTENT_LOADED_EVENT_END",void 0),N(Q(a),"NAVIGATION_START",void 0),N(Q(a),"_destroyed",void 0),N(Q(a),"_heartBeatTimeout",void 0),N(Q(a),"adTracker",void 0),N(Q(a),"dashjs",void 0),N(Q(a),"data",void 0),N(Q(a),"disablePlayheadRebufferTracking",void 0),N(Q(a),"disableRebufferTracking",void 0),N(Q(a),"errorTracker",void 0),N(Q(a),"errorTranslator",void 0),N(Q(a),"getAdData",void 0),N(Q(a),"getPlayheadTime",void 0),N(Q(a),"getStateData",void 0),N(Q(a),"hlsjs",void 0),N(Q(a),"id",void 0),N(Q(a),"longResumeTracker",void 0),N(Q(a),"minimumRebufferDuration",void 0),N(Q(a),"mux",void 0),N(Q(a),"oldEmit",void 0),N(Q(a),"playbackEventDispatcher",void 0),N(Q(a),"playbackHeartbeat",void 0),N(Q(a),"playbackHeartbeatTime",void 0),N(Q(a),"playheadTime",void 0),N(Q(a),"seekingTracker",void 0),N(Q(a),"sustainedRebufferThreshold",void 0),N(Q(a),"watchTimeTracker",void 0),N(Q(a),"currentFragmentPDT",void 0),N(Q(a),"currentFragmentStart",void 0),a.DOM_CONTENT_LOADED_EVENT_END=bs.domContentLoadedEventEnd(),a.NAVIGATION_START=bs.navigationStart();var o={debug:!1,minimumRebufferDuration:250,sustainedRebufferThreshold:1e3,playbackHeartbeatTime:25,beaconDomain:"litix.io",sampleRate:1,disableCookies:!1,respectDoNotTrack:!1,disableRebufferTracking:!1,disablePlayheadRebufferTracking:!1,errorTranslator:function(f){return f}};a.mux=i,a.id=r,n!=null&&n.beaconDomain&&a.mux.log.warn("The `beaconDomain` setting has been deprecated in favor of `beaconCollectionDomain`. Please change your integration to use `beaconCollectionDomain` instead of `beaconDomain`."),n=Object.assign(o,n),n.data=n.data||{},n.data.property_key&&(n.data.env_key=n.data.property_key,delete n.data.property_key),ge.level=n.debug?$t.DEBUG:$t.WARN,a.getPlayheadTime=n.getPlayheadTime,a.getStateData=n.getStateData||function(){return{}},a.getAdData=n.getAdData||function(){},a.minimumRebufferDuration=n.minimumRebufferDuration,a.sustainedRebufferThreshold=n.sustainedRebufferThreshold,a.playbackHeartbeatTime=n.playbackHeartbeatTime,a.disableRebufferTracking=n.disableRebufferTracking,a.disableRebufferTracking&&a.mux.log.warn("Disabling rebuffer tracking. This should only be used in specific circumstances as a last resort when your player is known to unreliably track rebuffering."),a.disablePlayheadRebufferTracking=n.disablePlayheadRebufferTracking,a.errorTranslator=n.errorTranslator,a.playbackEventDispatcher=new Jh(i,n.data.env_key,n),a.data={player_instance_id:Bi(),mux_sample_rate:n.sampleRate,beacon_domain:n.beaconCollectionDomain||n.beaconDomain},a.data.view_sequence_number=1,a.data.player_sequence_number=1,a.oldEmit=a.emit,a.emit=function(f,m){m=Object.assign({viewer_time:this.mux.utils.now()},m),this.oldEmit(f,m)};var l=function(){typeof this.data.view_start=="undefined"&&(this.data.view_start=this.mux.utils.now(),this.emit("viewstart"))}.bind(Q(a));a.on("viewinit",function(f,m){this._resetVideoData(),this._resetViewData(),this._resetErrorData(),this._updateStateData(),Object.assign(this.data,m),this._initializeViewData(),this.one("play",l),this.one("adbreakstart",l)});var c=function(f){this.emit("viewend"),this.send("viewend"),this.emit("viewinit",f)}.bind(Q(a));if(a.on("videochange",function(f,m){c(m)}),a.on("programchange",function(f,m){this.data.player_is_paused&&this.mux.log.warn("The `programchange` event is intended to be used when the content changes mid playback without the video source changing, however the video is not currently playing. If the video source is changing please use the videochange event otherwise you will lose startup time information."),c(Object.assign(m,{view_program_changed:!0})),l(),this.emit("play"),this.emit("playing")}),a.on("fragmentchange",function(f,m){this.currentFragmentPDT=m.currentFragmentPDT,this.currentFragmentStart=m.currentFragmentStart}),a.on("destroy",a.destroy),typeof window!="undefined"&&typeof window.addEventListener=="function"&&typeof window.removeEventListener=="function"){var u=function(){var f=typeof a.data.view_start!="undefined";a.mux.WINDOW_HIDDEN=document.visibilityState==="hidden",f&&a.mux.WINDOW_HIDDEN&&(a.data.player_is_paused||a.emit("hb"))};window.addEventListener("visibilitychange",u,!1);var d=function(f){f.persisted||a.destroy()};window.addEventListener("pagehide",d,!1),a.on("destroy",function(){window.removeEventListener("visibilitychange",u),window.removeEventListener("pagehide",d)})}a.on("playerready",function(f,m){Object.assign(this.data,m)}),nf.forEach(function(f){a.on(f,function(m,g){f.indexOf("ad")!==0&&this._updateStateData(),Object.assign(this.data,g),this._sanitizeData()}),a.on("after"+f,function(){(f!=="error"||this.errorTracker.viewErrored)&&this.send(f)})}),a.on("viewend",function(f,m){Object.assign(a.data,m)});var h=function(f){var m=this.mux.utils.now();this.data.player_init_time&&(this.data.player_startup_time=m-this.data.player_init_time),!this.mux.PLAYER_TRACKED&&this.NAVIGATION_START&&(this.mux.PLAYER_TRACKED=!0,(this.data.player_init_time||this.DOM_CONTENT_LOADED_EVENT_END)&&(this.data.page_load_time=Math.min(this.data.player_init_time||1/0,this.DOM_CONTENT_LOADED_EVENT_END||1/0)-this.NAVIGATION_START)),this.send("playerready"),delete this.data.player_startup_time,delete this.data.page_load_time};return a.one("playerready",h),a.longResumeTracker=new rf(Q(a)),a.errorTracker=new ah(Q(a)),new kh(Q(a)),a.seekingTracker=new Sh(Q(a)),a.playheadTime=new hh(Q(a)),a.playbackHeartbeat=new rh(Q(a)),new Th(Q(a)),a.watchTimeTracker=new lh(Q(a)),new uh(Q(a)),a.adTracker=new Rh(Q(a)),new ph(Q(a)),new mh(Q(a)),new vh(Q(a)),new Ih(Q(a)),new ef(Q(a)),n.hlsjs&&a.addHLSJS(n),n.dashjs&&a.addDashJS(n),a.emit("viewinit",n.data),a}return Ze(t,[{key:"destroy",value:function(){this._destroyed||(this._destroyed=!0,typeof this.data.view_start!="undefined"&&(this.emit("viewend"),this.send("viewend")),this.playbackEventDispatcher.destroy(),this.removeHLSJS(),this.removeDashJS(),window.clearTimeout(this._heartBeatTimeout))}},{key:"send",value:function(i){if(this.data.view_id){var r=Object.assign({},this.data),n=["player_program_time","player_manifest_newest_program_time","player_live_edge_program_time","player_program_time","video_holdback","video_part_holdback","video_target_duration","video_part_target_duration"];if(r.video_source_is_live===void 0&&(r.player_source_duration===1/0||r.video_source_duration===1/0?r.video_source_is_live=!0:(r.player_source_duration>0||r.video_source_duration>0)&&(r.video_source_is_live=!1)),r.video_source_is_live||n.forEach(function(c){r[c]=void 0}),r.video_source_url=r.video_source_url||r.player_source_url,r.video_source_url){var a=at($i(r.video_source_url),2),o=a[0],l=a[1];r.video_source_domain=l,r.video_source_hostname=o}delete r.ad_request_id,this.playbackEventDispatcher.send(i,r),this.data.view_sequence_number++,this.data.player_sequence_number++,af.has(i)||this._restartHeartBeat(),i==="viewend"&&delete this.data.view_id}}},{key:"_updateStateData",value:function(){Object.assign(this.data,this.getStateData()),this.playheadTime._updatePlayheadTime(),this._sanitizeData()}},{key:"_sanitizeData",value:function(){var i=this,r=["player_width","player_height","video_source_width","video_source_height","player_playhead_time","video_source_bitrate"];r.forEach(function(a){var o=parseInt(i.data[a],10);i.data[a]=isNaN(o)?void 0:o});var n=["player_source_url","video_source_url"];n.forEach(function(a){if(i.data[a]){var o=i.data[a].toLowerCase();(o.indexOf("data:")===0||o.indexOf("blob:")===0)&&(i.data[a]="MSE style URL")}})}},{key:"_resetVideoData",value:function(){var i=this;Object.keys(this.data).forEach(function(r){r.indexOf("video_")===0&&delete i.data[r]})}},{key:"_resetViewData",value:function(){var i=this;Object.keys(this.data).forEach(function(r){r.indexOf("view_")===0&&delete i.data[r]}),this.data.view_sequence_number=1}},{key:"_resetErrorData",value:function(){delete this.data.player_error_code,delete this.data.player_error_message,delete this.data.player_error_context,delete this.data.player_error_severity,delete this.data.player_error_business_exception}},{key:"_initializeViewData",value:function(){var i=this,r=this.data.view_id=Bi(),n=function(){r===i.data.view_id&&Ee(i.data,"player_view_count",1)};this.data.player_is_paused?this.one("play",n):n()}},{key:"_restartHeartBeat",value:function(){var i=this;window.clearTimeout(this._heartBeatTimeout),this._heartBeatTimeout=window.setTimeout(function(){i.data.player_is_paused||i.emit("hb")},1e4)}},{key:"addHLSJS",value:function(i){if(!i.hlsjs){this.mux.log.warn("You must pass a valid hlsjs instance in order to track it.");return}if(this.hlsjs){this.mux.log.warn("An instance of HLS.js is already being monitored for this player.");return}this.hlsjs=i.hlsjs,jd(this.mux,this.id,i.hlsjs,{},i.Hls||window.Hls)}},{key:"removeHLSJS",value:function(){this.hlsjs&&(zd(this.hlsjs),this.hlsjs=void 0)}},{key:"addDashJS",value:function(i){if(!i.dashjs){this.mux.log.warn("You must pass a valid dashjs instance in order to track it.");return}if(this.dashjs){this.mux.log.warn("An instance of Dash.js is already being monitored for this player.");return}this.dashjs=i.dashjs,Zd(this.mux,this.id,i.dashjs)}},{key:"removeDashJS",value:function(){this.dashjs&&(eh(this.dashjs),this.dashjs=void 0)}}]),t}(ih),lf=of;on();var Ni=qe(Dd());function cf(){return Ni.default&&!!(Ni.default.fullscreenElement||Ni.default.webkitFullscreenElement||Ni.default.mozFullScreenElement||Ni.default.msFullscreenElement)}var uf=["loadstart","pause","play","playing","seeking","seeked","timeupdate","ratechange","stalled","waiting","error","ended"],df={1:"MEDIA_ERR_ABORTED",2:"MEDIA_ERR_NETWORK",3:"MEDIA_ERR_DECODE",4:"MEDIA_ERR_SRC_NOT_SUPPORTED"};function hf(s,e,t){var i=at(tn(e),3),r=i[0],n=i[1],a=i[2],o=s.log,l=s.utils.getComputedStyle,c=s.utils.secondsToMs,u={automaticErrorTracking:!0};if(r){if(a!=="video"&&a!=="audio")return o.error("The element of `"+n+"` was not a media element.")}else return o.error("No element was found with the `"+n+"` query selector.");r.mux&&(r.mux.destroy(),delete r.mux,o.warn("Already monitoring this video element, replacing existing event listeners")),t=Object.assign(u,t),t.data=Object.assign({player_software:"HTML5 Video Element",player_mux_plugin_name:"VideoElementMonitor",player_mux_plugin_version:s.VERSION},t.data),t.getPlayheadTime=function(){return c(r.currentTime)},t.getStateData=function(){var h,f=this.hlsjs&&this.hlsjs.url,m=this.dashjs&&an(this.dashjs.getSource==="function")&&this.dashjs.getSource(),g={player_is_paused:r.paused,player_playhead_time:c(r.currentTime),player_width:parseInt(l(r,"width")),player_height:parseInt(l(r,"height")),player_autoplay_on:r.autoplay,player_preload_on:r.preload,player_language_code:r.lang,player_is_fullscreen:cf(),video_poster_url:r.poster,video_source_url:f||m||r.currentSrc,video_source_duration:c(r.duration),video_source_height:r.videoHeight,video_source_width:r.videoWidth,view_dropped_frame_count:r==null||(h=r.getVideoPlaybackQuality)===null||h===void 0?void 0:h.call(r).droppedVideoFrames},p=t.getPlayheadTime();if(r.getStartDate&&p>0){var v=r.getStartDate();if(v&&typeof v.getTime=="function"&&v.getTime()){var E=v.getTime();if(g.player_program_time=E+p,r.seekable.length>0){var T=E+r.seekable.end(r.seekable.length-1);g.player_live_edge_program_time=T}}}return g},r.mux=r.mux||{},r.mux.deleted=!1,r.mux.emit=function(h,f){s.emit(n,h,f)};var d=function(){o.error("The monitor for this video element has already been destroyed.")};r.mux.destroy=function(){Object.keys(r.mux.listeners).forEach(function(h){r.removeEventListener(h,r.mux.listeners[h],!1)}),delete r.mux.listeners,r.mux.destroy=d,r.mux.swapElement=d,r.mux.emit=d,r.mux.addHLSJS=d,r.mux.addDashJS=d,r.mux.removeHLSJS=d,r.mux.removeDashJS=d,r.mux.deleted=!0,s.emit(n,"destroy")},r.mux.swapElement=function(h){var f=at(tn(h),3),m=f[0],g=f[1],p=f[2];if(m){if(p!=="video"&&p!=="audio")return s.log.error("The element of `"+g+"` was not a media element.")}else return s.log.error("No element was found with the `"+g+"` query selector.");m.muxId=r.muxId,delete r.muxId,m.mux=m.mux||{},m.mux.listeners=Object.assign({},r.mux.listeners),delete r.mux.listeners,Object.keys(m.mux.listeners).forEach(function(v){r.removeEventListener(v,m.mux.listeners[v],!1),m.addEventListener(v,m.mux.listeners[v],!1)}),m.mux.swapElement=r.mux.swapElement,m.mux.destroy=r.mux.destroy,delete r.mux,r=m},r.mux.addHLSJS=function(h){s.addHLSJS(n,h)},r.mux.addDashJS=function(h){s.addDashJS(n,h)},r.mux.removeHLSJS=function(){s.removeHLSJS(n)},r.mux.removeDashJS=function(){s.removeDashJS(n)},s.init(n,t),s.emit(n,"playerready"),r.paused||(s.emit(n,"play"),r.readyState>2&&s.emit(n,"playing")),r.mux.listeners={},uf.forEach(function(h){h==="error"&&!t.automaticErrorTracking||(r.mux.listeners[h]=function(){var f={};if(h==="error"){if(!r.error||r.error.code===1)return;f.player_error_code=r.error.code,f.player_error_message=df[r.error.code]||r.error.message}s.emit(n,h,f)},r.addEventListener(h,r.mux.listeners[h],!1))})}function ff(s,e,t,i){var r=i;if(s&&typeof s[e]=="function")try{r=s[e].apply(s,t)}catch(n){ge.info("safeCall error",n)}return r}var Ui=qe(Je()),oi;Ui.default&&Ui.default.WeakMap&&(oi=new WeakMap);function mf(s,e){if(!s||!e||!Ui.default||typeof Ui.default.getComputedStyle!="function")return"";var t;return oi&&oi.has(s)&&(t=oi.get(s)),t||(t=Ui.default.getComputedStyle(s,null),oi&&oi.set(s,t)),t.getPropertyValue(e)}function gf(s){return Math.floor(s*1e3)}var Ut={TARGET_DURATION:"#EXT-X-TARGETDURATION",PART_INF:"#EXT-X-PART-INF",SERVER_CONTROL:"#EXT-X-SERVER-CONTROL",INF:"#EXTINF",PROGRAM_DATE_TIME:"#EXT-X-PROGRAM-DATE-TIME",VERSION:"#EXT-X-VERSION",SESSION_DATA:"#EXT-X-SESSION-DATA"},Ls=function(s){return this.buffer="",this.manifest={segments:[],serverControl:{},sessionData:{}},this.currentUri={},this.process(s),this.manifest};Ls.prototype.process=function(s){var e;for(this.buffer+=s,e=this.buffer.indexOf(`
`);e>-1;e=this.buffer.indexOf(`
`))this.processLine(this.buffer.substring(0,e)),this.buffer=this.buffer.substring(e+1)};Ls.prototype.processLine=function(s){var e=s.indexOf(":"),t=Ef(s,e),i=t[0],r=t.length===2?un(t[1]):void 0;if(i[0]!=="#")this.currentUri.uri=i,this.manifest.segments.push(this.currentUri),this.manifest.targetDuration&&!("duration"in this.currentUri)&&(this.currentUri.duration=this.manifest.targetDuration),this.currentUri={};else switch(i){case Ut.TARGET_DURATION:{if(!isFinite(r)||r<0)return;this.manifest.targetDuration=r,this.setHoldBack();break}case Ut.PART_INF:{Zr(this.manifest,t),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),this.setHoldBack();break}case Ut.SERVER_CONTROL:{Zr(this.manifest,t),this.setHoldBack();break}case Ut.INF:{r===0?this.currentUri.duration=.01:r>0&&(this.currentUri.duration=r);break}case Ut.PROGRAM_DATE_TIME:{var n=r,a=new Date(n);this.manifest.dateTimeString||(this.manifest.dateTimeString=n,this.manifest.dateTimeObject=a),this.currentUri.dateTimeString=n,this.currentUri.dateTimeObject=a;break}case Ut.VERSION:{Zr(this.manifest,t);break}case Ut.SESSION_DATA:{var o=Tf(t[1]),l=Yo(o);Object.assign(this.manifest.sessionData,l)}}};Ls.prototype.setHoldBack=function(){var s=this.manifest,e=s.serverControl,t=s.targetDuration,i=s.partTargetDuration;if(e){var r="holdBack",n="partHoldBack",a=t&&t*3,o=i&&i*2;t&&!e.hasOwnProperty(r)&&(e[r]=a),a&&e[r]<a&&(e[r]=a),i&&!e.hasOwnProperty(n)&&(e[n]=i*3),i&&e[n]<o&&(e[n]=o)}};var Zr=function(s,e){var t=il(e[0].replace("#EXT-X-","")),i;vf(e[1])?(i={},i=Object.assign(yf(e[1]),i)):i=un(e[1]),s[t]=i},il=function(s){return s.toLowerCase().replace(/-(\w)/g,function(e){return e[1].toUpperCase()})},un=function(s){if(s.toLowerCase()==="yes"||s.toLowerCase()==="no")return s.toLowerCase()==="yes";var e=s.indexOf(":")!==-1?s:parseFloat(s);return isNaN(e)?s:e},pf=function(s){var e={},t=s.split("=");if(t.length>1){var i=il(t[0]);e[i]=un(t[1])}return e},yf=function(s){for(var e=s.split(","),t={},i=0;e.length>i;i++){var r=e[i],n=pf(r);t=Object.assign(n,t)}return t},vf=function(s){return s.indexOf("=")>-1},Ef=function(s,e){return e===-1?[s]:[s.substring(0,e),s.substring(e+1)]},Tf=function(s){var e={};if(s){var t=s.search(","),i=s.slice(0,t),r=s.slice(t+1),n=[i,r];return n.forEach(function(a,o){for(var l=a.replace(/['"]+/g,"").split("="),c=0;c<l.length;c++)l[c]==="DATA-ID"&&(e["DATA-ID"]=l[1-c]),l[c]==="VALUE"&&(e.VALUE=l[1-c])}),{data:e}}},xf=Ls,_f={safeCall:ff,safeIncrement:Ee,getComputedStyle:mf,secondsToMs:gf,assign:Object.assign,headersStringToObject:cn,cdnHeadersToRequestId:Rs,extractHostnameAndDomain:$i,extractHostname:Ve,manifestParser:xf,generateShortID:qo,generateUUID:Bi,now:Se.now},Sf=_f,bf={PLAYER_READY:"playerready",VIEW_INIT:"viewinit",VIDEO_CHANGE:"videochange",PLAY:"play",PAUSE:"pause",PLAYING:"playing",TIME_UPDATE:"timeupdate",SEEKING:"seeking",SEEKED:"seeked",REBUFFER_START:"rebufferstart",REBUFFER_END:"rebufferend",ERROR:"error",ENDED:"ended",RENDITION_CHANGE:"renditionchange",ORIENTATION_CHANGE:"orientationchange",AD_REQUEST:"adrequest",AD_RESPONSE:"adresponse",AD_BREAK_START:"adbreakstart",AD_PLAY:"adplay",AD_PLAYING:"adplaying",AD_PAUSE:"adpause",AD_FIRST_QUARTILE:"adfirstquartile",AD_MID_POINT:"admidpoint",AD_THIRD_QUARTILE:"adthirdquartile",AD_ENDED:"adended",AD_BREAK_END:"adbreakend",AD_ERROR:"aderror",REQUEST_COMPLETED:"requestcompleted",REQUEST_FAILED:"requestfailed",REQUEST_CANCELLED:"requestcanceled"},Af=bf,Rf="mux-embed",Lf="5.3.1",If="2.1",Ge={},pt=function(s){var e=arguments;typeof s=="string"?pt.hasOwnProperty(s)?Fi.default.setTimeout(function(){e=Array.prototype.splice.call(e,1),pt[s].apply(null,e)},0):ge.warn("`"+s+"` is an unknown task"):typeof s=="function"?Fi.default.setTimeout(function(){s(pt)},0):ge.warn("`"+s+"` is invalid.")},Df={loaded:Se.now(),NAME:Rf,VERSION:Lf,API_VERSION:If,PLAYER_TRACKED:!1,monitor:function(s,e){return hf(pt,s,e)},destroyMonitor:function(s){var e=at(tn(s